%YAML 1.2
---
# https://www.sublimetext.com/docs/syntax.html
# https://www.mathworks.com/help/matlab/index.html
name: MATLAB
scope: source.matlab
version: 2

file_extensions:
  - matlab

first_line_match: |-
  (?xi:
    ^ \s* \%+ .*? -\*- .*? \bmatlab\b .*? -\*-  # editorconfig
  )

variables:
  # https://www.mathworks.com/help/matlab/matlab_prog/variable-names.html
  identifier: (?:[A-Za-z]\w*)
  filename: (?:[^;,(\s]+)
  eol: (?=\s*[%\n])

  # https://www.mathworks.com/help/matlab/referencelist.html?type=function&listtype=alpha
  matlab_functions: |-
    (?x: abs | accumarray | acos | acosd | acosh | acot | acotd | acoth | acsc | acscd | acsch | actxGetRunningServer
      | actxserver | add | addboundary | addcats | addCause | addClass | addCondition | addConditionsFrom
      | addConstructor | addCorrection | addedge | addEnumeration | addevent | addFields | addFile
      | addFolderIncludingChildFiles | addFunction | addFunctionType | addGroup | addLabel | addlistener | addMethod
      | addmulti | addnode | addOpaqueType | addOptional | addParameter | addPath | addpath | addPlugin | addpoints
      | addpref | addprop | addProperty | addproperty | addReference | addRequired | addsample | addsampletocollection
      | addSetting | addShortcut | addShutdownFile | addStartupFile | addStyle | addTeardown | addtodate
      | addToolbarExplorationButtons | addts | addvars | adjacency | airy | align | alim | all | allchild | allcycles
      | allowModelReferenceDiscreteSampleTimeInheritanceImpl | allpaths | alpha | alphamap | alphanumericBoundary
      | alphanumericsPattern | alphaShape | alphaSpectrum | alphaTriangulation | amd | analyzeCodeCompatibility
      | ancestor | and | angle | animatedline | annotation | any | appdesigner | append | applyFixture | area
      | array2table | array2timetable | arrayDatastore | arrayfun | ascii | asec | asecd | asech | asFewOfPattern | asin
      | asind | asinh | asManyOfPattern | assert | assertAccessed | assertCalled | assertClass | assertEmpty
      | assertEqual | assertError | assertFail | assertFalse | assertGreaterThan | assertGreaterThanOrEqual
      | assertInstanceOf | assertLength | assertLessThan | assertLessThanOrEqual | assertMatches | assertNotAccessed
      | assertNotCalled | assertNotEmpty | assertNotEqual | assertNotSameHandle | assertNotSet | assertNumElements
      | assertReturnsTrue | assertSameHandle | assertSet | assertSize | assertSubstring | assertSuccess | assertThat
      | assertTrue | assertUsing | assertWarning | assertWarningFree | assignin | assignOutputsWhen | assumeAccessed
      | assumeCalled | assumeClass | assumeEmpty | assumeEqual | assumeError | assumeFail | assumeFalse
      | assumeGreaterThan | assumeGreaterThanOrEqual | assumeInstanceOf | assumeLength | assumeLessThan
      | assumeLessThanOrEqual | assumeMatches | assumeNotAccessed | assumeNotCalled | assumeNotEmpty | assumeNotEqual
      | assumeNotSameHandle | assumeNotSet | assumeNumElements | assumeReturnsTrue | assumeSameHandle | assumeSet
      | assumeSize | assumeSubstring | assumeThat | assumeTrue | assumeUsing | assumeWarning | assumeWarningFree | atan
      | atan2 | atan2d | atand | atanh | audiodevinfo | audiodevreset | audioinfo | audioplayer | audioread
      | audiorecorder | audiowrite | autumn | aviinfo | axes | axtoolbar | axtoolbarbtn | balance | bandwidth | bar
      | bar3 | bar3h | barh | barycentricToCartesian | base2dec | batchStartupOptionUsed | bctree | BeginInvoke | bench
      | besselh | besseli | besselj | besselk | bessely | beta | betainc | betaincinv | betaln | between | bfsearch
      | bicg | bicgstab | bicgstabl | biconncomp | bin2dec | binary | binscatter | bitand | bitcmp | bitget | bitnot
      | bitor | bitset | bitshift | bitxor | blanks | ble | blelist | blkdiag | bluetooth | bluetoothlist | bone
      | boundary | boundaryFacets | boundaryshape | boundingbox | bounds | boxchart | brighten | bsxfun | bubblechart
      | bubblechart3 | bubblecloud | bubblelegend | bubblelim | bubblesize | build | builddocsearchdb | builtin | bvp4c
      | bvp5c | bvpget | bvpinit | bvpset | bvpxtend | caldays | caldiff | calendar | calendarDuration | calllib
      | calmonths | calquarters | calweeks | calyears | camdolly | cameratoolbar | camlight | camlookat | camorbit
      | campan | campos | camproj | camroll | camtarget | camup | camva | camzoom | canUseGPU | canUseParallelPool
      | cart2pol | cart2sph | cartesianToBarycentric | caseInsensitivePattern | caseSensitivePattern | cast | cat
      | categorical | categories | caxis | cd | cdf2rdf | cdfepoch | cdfinfo | cdfread | cdfwrite | ceil | cell
      | cell2mat | cell2struct | cell2table | celldisp | cellfun | cellplot | cellstr | centrality | centroid | cgs
      | changeFields | char | characteristic | characterListPattern | checkcode | chol | cholupdate | choose
      | chooseContextMenu | circshift | circumcenter | clabel | class | classUnderlying | clc | clearAllMemoizedCaches
      | clearCache | clearMockHistory | clearPersonalValue | clearpoints | clearTemporaryValue | clearvars | clf
      | clibArray | clibConvertArray | clibIsNull | clibIsReadOnly | clibRelease | clipboard | clock | clone | closeFile
      | closereq | cmap2gray | cmpermute | cmunique | codeCompatibilityReport | colamd | collapse | colorbar | colorcube
      | colordef | colormap | colororder | colperm | Combine | combine | comet | comet3 | compan | comparisonPlot
      | compass | complete | complex | compose | computer | comserver | cond | condeig | condensation | condest
      | coneplot | configureCallback | configureTerminator | conj | conncomp | contains | containsrange | contour
      | contour3 | contourc | contourf | contourslice | contrast | conv | conv2 | convert | convertCharsToStrings
      | convertContainedStringsToChars | convertLike | convertStringsToChars | convertTo | convertvars | convexHull
      | convhull | convhulln | convn | cool | copper | copy | copyElement | copyfile | copygraphics | copyHDU | copyobj
      | copyTo | corrcoef | cos | cosd | cosh | cospi | cot | cotd | coth | count | countcats | countEachLabel | cov
      | cplxpair | cputime | createCategory | createFile | createImg | createLabel | createMock | createSampleTime
      | createSharedTestFixture | createTbl | createTestClassInstance | createTestMethodInstance | criticalAlpha | cross
      | csc | cscd | csch | csvread | csvwrite | ctranspose | cummax | cummin | cumprod | cumsum | cumtrapz | curl
      | currentFileIndexComparator | currentProject | cyclebasis | cylinder | daqread | daspect | datacursormode
      | datastore | datatip | dataTipInteraction | dataTipTextRow | date | datenum | dateshift | datestr | datetick
      | datetime | datevec | day | days | dde23 | ddeget | ddensd | ddesd | ddeset | deal | deblank | dec2base | dec2bin
      | dec2hex | decic | decomposition | deconv | defineArgument | defineOutput | deg2rad | degree | del2 | delaunay
      | delaunayn | delaunayTriangulation | delegateTo | delete | deleteCol | deleteFile | deleteHDU | deleteKey
      | deleteproperty | deleteRecord | deleteRows | delevent | delimitedTextImportOptions | delsample
      | delsamplefromcollection | descriptor | det | details | detectImportOptions | detrend | deval | dfsearch | diag
      | diagnose | dialog | diff | diffuse | digitBoundary | digitsPattern | digraph | dir | disableDefaultInteractivity
      | discretize | dismissAlertDialog | disp | display | displayEmptyObject | displayNonScalarObject
      | displayScalarHandleToDeletedObject | displayScalarObject | dissect | distances | dither | divergence | dlmread
      | dlmwrite | dmperm | done | dos | dot | double | drag | dragrect | dsearchn | duration | dynamicprops | echotcpip
      | edgeAttachments | edgecount | edges | eig | eigs | ellipj | ellipke | ellipsoid | empty
      | enableDefaultInteractivity | enableLegacyExplorationModes | enableservice | EndInvoke | endsWith | enumeration
      | eomday | eq | equilibrate | erase | eraseBetween | erf | erfc | erfcinv | erfcx | erfinv | error | errorbar
      | errordlg | etime | etree | etreeplot | eval | evalc | evalin | evaluate | eventlisteners | events | exceltime
      | exp | expand | expectedContentLength | expint | expm | expm1 | export | export2wsdlg | exportapp
      | exportgraphics | exportsetupdlg | extract | extractAfter | extractBefore | extractBetween | eye | ezpolar
      | faceNormal | factor | factorial | fatalAssertAccessed | fatalAssertCalled | fatalAssertClass | fatalAssertEmpty
      | fatalAssertEqual | fatalAssertError | fatalAssertFail | fatalAssertFalse | fatalAssertGreaterThan
      | fatalAssertGreaterThanOrEqual | fatalAssertInstanceOf | fatalAssertLength | fatalAssertLessThan
      | fatalAssertLessThanOrEqual | fatalAssertMatches | fatalAssertNotAccessed | fatalAssertNotCalled
      | fatalAssertNotEmpty | fatalAssertNotEqual | fatalAssertNotSameHandle | fatalAssertNotSet
      | fatalAssertNumElements | fatalAssertReturnsTrue | fatalAssertSameHandle | fatalAssertSet | fatalAssertSize
      | fatalAssertSubstring | fatalAssertThat | fatalAssertTrue | fatalAssertUsing | fatalAssertWarning
      | fatalAssertWarningFree | fclose | fcontour | feather | featureEdges | feof | ferror | feval | fewerbins | fft
      | fft2 | fftn | fftshift | fftw | fgetl | fgets | fieldnames | figure | figurepalette | fileattrib | fileDatastore
      | filemarker | fileMode | fileName | fileparts | fileread | filesep | fill | fill3 | fillmissing | filloutliers
      | filter | filter2 | fimplicit | fimplicit3 | find | findall | findCategory | findedge | findEvent | findfigs
      | findFile | findgroups | findLabel | findnode | findobj | findprop | finish | fitsdisp | fitsinfo | fitsread
      | fitswrite | fix | fixedWidthImportOptions | flag | flip | flipedge | fliplr | flipud | floor | flow | flush
      | fmesh | fminbnd | fminsearch | fopen | formattedDisplayText | fplot | fplot3 | fprintf | frame2im | fread
      | freeBoundary | freqspace | frewind | fscanf | fseek | fsurf | ftell | ftp | full | fullfile | func2str
      | functiontests | funm | fwrite | fzero | gallery | gamma | gammainc | gammaincinv | gammaln | gather | gca | gcbf
      | gcbo | gcd | gcf | gcmr | gco | ge | genpath | genvarname | geoaxes | geobasemap | geobubble | geodensityplot
      | geolimits | geoplot | geoscatter | geotickformat | get | getabstime | getAColParms | getappdata | getaudiodata
      | getAxes | getBColParms | getClass | getColName | getColorbar | getColType | getConstantValue
      | getCurrentFilename | getCurrentTime | getData | getdatasamples | getdatasamplesize | getDiagnosticFor
      | getDiscreteStateImpl | getDiscreteStateSpecificationImpl | getdisp | getenv | getEqColType | getfield
      | getFields | getFileFormats | getFiles | getFolders | getFooter | getframe | getGlobalNamesImpl | getHdrSpace
      | getHDUnum | getHDUtype | getHeader | getHeaderImpl | getIconImpl | getImgSize | getImgType
      | getImpulseResponseLengthImpl | getInputDimensionConstraintImpl | getInputNamesImpl | getinterpmethod | getLayout
      | getLegend | getLocation | getMockHistory | getNegativeDiagnosticFor | getnext | getNumCols | getNumHDUs
      | getNumInputs | getNumInputsImpl | getNumOutputs | getNumOutputsImpl | getNumRows | getOpenFiles
      | getOutputDataTypeImpl | getOutputDimensionConstraintImpl | getOutputNamesImpl | getOutputSizeImpl | getParameter
      | getpinstatus | getpixelposition | getplayer | getpoints | getPostActValString | getPostConditionString
      | getPostDescriptionString | getPostExpValString | getPreDescriptionString | getpref | getProfiles
      | getPropertyGroups | getPropertyGroupsImpl | getqualitydesc | getrangefromclass | getReasonPhrase | getReport
      | getsamples | getSampleTime | getSampleTimeImpl | getsampleusingtime | getSharedTestFixtures
      | getSimulateUsingImpl | getSimulinkFunctionNamesImpl | gettimeseriesnames | getTimeStr | gettsafteratevent
      | gettsafterevent | gettsatevent | gettsbeforeatevent | gettsbeforeevent | gettsbetweenevents | getvaropts
      | getVersion | ginput | gmres | gobjects | gplot | grabcode | gradient | graph | gray | graymon | griddata
      | griddatan | griddedInterpolant | groot | groupcounts | groupfilter | groupsummary | grouptransform | gsvd | gt
      | gtext | guidata | guihandles | gunzip | gzip | h5create | h5disp | h5info | h5read | h5readatt | h5write
      | h5writeatt | hadamard | handle | hankel | hascycles | hasdata | hasFactoryValue | hasfile | hasFrame | hasGroup
      | hasnext | hasNextBlock | hasNextFile | hasPersonalValue | hasPreviousBlock | hasPreviousFile | hasSetting
      | hasTemporaryValue | hdfan | hdfdf24 | hdfdfr8 | hdfh | hdfhd | hdfhe | hdfhx | hdfinfo | hdfml | hdfpt | hdfread
      | hdfv | hdfvf | hdfvh | hdfvs | head | heatmap | height | helpdlg | hess | hex2dec | hex2num | hgexport | hggroup
      | hgload | hgsave | hgsetget | hgtransform | highlight | hilb | histcounts | histcounts2 | histogram | histogram2
      | hms | holes | home | horzcat | hot | hour | hours | hover | hsv | hsv2rgb | hypot | ichol | idealfilter
      | idivide | ifft | ifft2 | ifftn | ifftshift | ilu | im2double | im2frame | im2gray | im2java | imag | image
      | imageDatastore | imagesc | imapprox | imfinfo | imformats | imgCompress | importdata | importNode | imread
      | imresize | imshow | imtile | imwrite | incenter | incidence | ind2rgb | ind2sub | indegree | inedges | inf
      | infoImpl | initialize | initializeDatastore | inmem | inner2outer | innerjoin | inpolygon | input | inputdlg
      | inputname | inputParser | insertAfter | insertATbl | insertBefore | insertBTbl | insertCol | insertImg
      | insertRows | inShape | int16 | int2str | int32 | int64 | int8 | integral | integral2 | integral3 | interp1
      | interp1q | interp2 | interp3 | interpft | interpn | interpstreamspeed | intersect | inv | invhilb | invoke
      | ipermute | iqr | isa | isappdata | isaUnderlying | isbanded | isbetween | iscalendarduration | iscategorical
      | iscategory | iscell | iscellstr | ischange | ischar | iscolumn | iscom | isCompatible | isCompressedImg
      | isConnected | isdag | isdatetime | isdiag | isDiscreteStateSpecificationMutableImpl | isDone | isDoneImpl
      | isdst | isduration | isempty | isenum | isequal | isequaln | isequalwithequalnans | isevent | isfield | isfile
      | isfinite | isfloat | isfolder | isfullfile | isgraphics | ishandle | ishermitian | ishghandle | ishold | ishole
      | isIllConditioned | isInactivePropertyImpl | isinf | isInputComplexityMutableImpl | isInputDataTypeMutableImpl
      | isInputDirectFeedthroughImpl | isInputSizeLockedImpl | isInputSizeMutableImpl | isinteger | isinterface
      | isInterior | isinterior | isisomorphic | isjava | isKey | iskeyword | isletter | isLoaded | islocalmax
      | islocalmin | isLocked | islogical | ismac | isMATLABReleaseOlderThan | ismatrix | ismember | ismembertol
      | ismethod | ismissing | ismultigraph | isnan | isnat | isNull | isnumeric | isobject | isocaps | isocolors
      | isomorphism | isonormals | isordinal | isosurface | isoutlier | isOutputComplexImpl | isOutputFixedSizeImpl
      | isPartitionable | ispc | isplaying | ispref | isprime | isprop | isprotected | isreal | isrecording | isregular
      | isrow | isscalar | isShuffleable | issimplified | issorted | issortedrows | isspace | issparse | isstring
      | isStringScalar | isstrprop | isstruct | isstudent | issymmetric | istable | istall | istimetable | istril
      | istriu | isTunablePropertyDataTypeMutableImpl | isundefined | isUnderlyingType | isunix | isvalid | isvarname
      | isvector | isweekend | javaaddpath | javaArray | javachk | javaclasspath | javaMethod | javaMethodEDT
      | javaObject | javaObjectEDT | javarmpath | jet | join | jsondecode | jsonencode | juliandate | keepMeasuring
      | keyboard | keys | kron | labeledge | labelnode | lag | laplacian | lasterr | lasterror | lastwarn | layout | lcm
      | ldivide | ldl | le | leapseconds | legend | legendre | length | letterBoundary | lettersPattern | libfunctions
      | libfunctionsview | libisloaded | libpointer | libstruct | license | light | lightangle | lighting | lin2mu
      | line | lineBoundary | lines | linkaxes | linkdata | linkprop | linsolve | linspace | listAllProjectReferences
      | listdlg | listener | listfonts | listImpactedFiles | listModifiedFiles | listRequiredFiles | load | loadlibrary
      | loadobj | loadObjectImpl | localfunctions | log | log10 | log1p | log2 | logical | loglog | logm | logspace
      | lookAheadBoundary | lookBehindBoundary | lookfor | lower | ls | lscov | lsqminnorm | lsqnonneg | lsqr | lt | lu
      | magic | makehgtform | makima | mapreduce | mapreducer | maskedPattern | mat2cell | mat2str | matches
      | matchpairs | matfile | matlabdrive | matlabrc | matlabRelease | matlabroot | max | maxflow | maxk
      | maxNumCompThreads | maxpartitions | mean | median | memmapfile | memoize | memory | mergecats | mergevars | mesh
      | meshc | meshgrid | meshz | metaclass | methods | methodsview | mex | mexext | mexhost | mfilename | mget
      | milliseconds | min | mink | minres | minspantree | minus | minute | minutes | mislocked | missing | mkpp
      | mldivide | mlint | mlintrpt | mlock | mmfileinfo | mod | mode | month | morebins | movAbsHDU | move | movegui
      | movevars | movie | movmad | movmax | movmean | movmedian | movmin | movNamHDU | movprod | movRelHDU | movstd
      | movsum | movvar | mpower | mput | mrdivide | msgbox | mtimes | mu2lin | multibandread | multibandwrite | munlock
      | mustBeA | mustBeFile | mustBeFinite | mustBeFloat | mustBeFolder | mustBeGreaterThan | mustBeGreaterThanOrEqual
      | mustBeInRange | mustBeInteger | mustBeLessThan | mustBeLessThanOrEqual | mustBeMember | mustBeNegative
      | mustBeNonempty | mustBeNonmissing | mustBeNonNan | mustBeNonnegative | mustBeNonpositive | mustBeNonsparse
      | mustBeNonzero | mustBeNonzeroLengthText | mustBeNumeric | mustBeNumericOrLogical | mustBePositive | mustBeReal
      | mustBeScalarOrEmpty | mustBeText | mustBeTextScalar | mustBeUnderlyingType | mustBeValidVariableName
      | mustBeVector | namedargs2cell | namedPattern | nan | nargchk | narginchk | nargoutchk | native2unicode
      | nccreate | ncdisp | nchoosek | ncinfo | ncread | ncreadatt | ncwrite | ncwriteatt | ncwriteschema | ndgrid
      | ndims | ne | nearest | nearestNeighbor | nearestvertex | needsReset | neighbors | newline | newplot | nextblock
      | nextfile | nextpow2 | nexttile | nnz | nonzeros | norm | normalize | normest | not | notify | now | nsidedpoly
      | nthroot | nufft | nufftn | null | num2cell | num2hex | num2ruler | num2str | numArgumentsFromSubscript
      | numboundaries | numedges | numel | numnodes | numpartitions | numRegions | numsides | nzmax | ode113 | ode15i
      | ode15s | ode23 | ode23s | ode23t | ode23tb | ode45 | odeget | odeset | odextend | onCleanup | ones | onFailure
      | open | openDiskFile | openfig | openFile | openProject | openvar | optimget | optimset | optionalPattern | or
      | ordeig | orderfields | ordqz | ordschur | orient | orth | outdegree | outedges | outerjoin | outputImpl
      | overlaps | overlapsrange | pack | pad | padecoef | pagectranspose | pagemtimes | pagesetupdlg | pagetranspose
      | pan | panInteraction | parallelplot | pareto | parquetDatastore | parquetinfo | parquetread | parquetwrite
      | parse | partition | parula | pascal | patch | patchdemoxmlfile | path | path2rc | pathsep | pathtool | pause
      | pbaspect | pcg | pchip | pcode | pcolor | pdepe | pdeval | peaks | perimeter | perl | perms | permute | pie
      | pie3 | pink | pinv | planerot | play | playblocking | plot | plot3 | plotbrowser | plotedit | plotmatrix
      | plottools | plus | pointLocation | pol2cart | polaraxes | polarbubblechart | polarhistogram | polarplot
      | polarscatter | poly | polyarea | polybuffer | polyder | polyeig | polyfit | polyint | polyshape | polyval
      | polyvalm | populateFoldersFromLocation | posixtime | possessivePattern | pow2 | power | ppval | predecessors
      | prefdir | preferredBufferSize | press | preview | previousblock | previousfile | primes | print | printdlg
      | printopt | printpreview | prism | processInputSpecificationChangeImpl | processTunedPropertiesImpl | prod
      | profile | profsave | progress | propagatedInputComplexity | propagatedInputDataType | propagatedInputFixedSize
      | propagatedInputSize | propedit | properties | propertyeditor | psi | publish | putData | pwd | pyargs | pyenv
      | qmr | qr | qrdelete | qrinsert | qrupdate | quad2d | quadgk | quarter | questdlg | quiver | quiver3 | qz
      | rad2deg | rand | randi | randn | randperm | rank | rat | rats | rbbox | rcond | rdivide | read | readall
      | readATblHdr | readBTblHdr | readCard | readcell | readCol | readFrame | readimage | readImg | readKey
      | readKeyCmplx | readKeyDbl | readKeyLongLong | readKeyLongStr | readKeyUnit | readline | readlines | readmatrix
      | readRecord | readstruct | readtable | readtimetable | readvars | real | reallog | realpow | realsqrt | record
      | recordblocking | rectangle | rectint | recycle | reducepatch | reducevolume | refresh | refreshdata
      | refreshSourceControl | regexp | regexpi | regexpPattern | regexprep | regexptranslate | regions
      | regionZoomInteraction | registerevent | regmatlabserver | rehash | relationaloperators | release | releaseImpl
      | reload | rem | Remove | remove | RemoveAll | removeCategory | removecats | removeFields | removeFile
      | removeGroup | removeLabel | removeParameter | removePath | removeReference | removeSetting | removeShortcut
      | removeShutdownFile | removeStartupFile | removeStyle | removeToolbarExplorationButtons | removets | removevars
      | rename | renamecats | renamevars | rendererinfo | reordercats | reordernodes | repeat | repelem | replace
      | replaceBetween | replaceFields | repmat | reportFinalizedResult | reportFinalizedSuite | resample | rescale
      | reset | resetImpl | reshape | residue | resolve | restartable | restoredefaultpath | resume | rethrow | retime
      | retrieveFrom | return | returnStoredValueWhen | reusable | reverse | rgb2gray | rgb2hsv | rgb2ind | rgbplot
      | ribbon | rlim | rmappdata | rmboundary | rmedge | rmfield | rmholes | rmmissing | rmnode | rmoutliers | rmpath
      | rmpref | rmprop | rmslivers | rng | roots | rose | rosser | rot90 | rotate | rotate3d | rotateInteraction
      | round | rowfun | rows2vars | rq | rref | rsf2csf | rtickangle | rtickformat | rticklabels | rticks | ruler2num
      | rulerPanInteraction | run | runChecks | runInParallel | runperf | runSession | runTest | runTestClass
      | runTestMethod | runtests | runTestSuite | samplefun | sampleSummary | satisfiedBy | save | saveas | savefig
      | saveobj | saveObjectImpl | savepath | scale | scatter | scatter3 | scatteredInterpolant | scatterhistogram
      | schur | scroll | sec | secd | sech | second | seconds | seek | selectFailed | selectIf | selectIncomplete
      | selectLogged | selectmoveresize | selectPassed | semilogx | semilogy | send | sendmail | serialport
      | serialportlist | set | setabstime | setappdata | setBscale | setcats | setCompressionType | setdatatype
      | setdiff | setdisp | setDTR | setenv | setfield | setHCompScale | setHCompSmooth | setinterpmethod | setParameter
      | setpixelposition | setpref | setProperties | setRTS | setTileDim | settimeseriesnames | settings | setToValue
      | setTscale | setuniformtime | setup | setupImpl | setupSharedTestFixture | setupTestClass | setupTestMethod
      | setvaropts | setvartype | setxor | sgtitle | shading | sheetnames | shg | shiftdim | shortestpath
      | shortestpathtree | show | showFiSettingsImpl | showplottool | showSimulateUsingImpl | shrinkfaces | shuffle
      | sign | simplify | sin | sind | single | sinh | sinpi | size | slice | smooth3 | smoothdata | snapnow | sort
      | sortboundaries | sortByFixtures | sortregions | sortrows | sortx | sorty | sound | soundsc | spalloc | sparse
      | spaugment | spconvert | spdiags | specular | speye | spfun | sph2cart | sphere | spinmap | spline | split
      | splitapply | splitEachLabel | splitlines | splitvars | spones | spparms | sprand | sprandn | sprandsym | sprank
      | spreadsheetDatastore | spreadsheetImportOptions | spring | sprintf | spy | sqrt | sqrtm | squeeze | ss2tf
      | sscanf | stack | stackedplot | stairs | standardizeMissing | start | startat | startMeasuring | startsWith
      | startup | stats | std | stem | stem3 | step | stepImpl | stlread | stlwrite | stop | stopMeasuring | storeIn
      | storeValueWhen | str2double | str2func | str2num | strcat | strcmp | strcmpi | stream2 | stream3 | streamline
      | streamparticles | streamribbon | streamslice | streamtube | strfind | string | strings | strip | strjoin
      | strjust | strlength | strncmp | strncmpi | strrep | strsplit | strtok | strtrim | struct | struct2cell
      | struct2table | structfun | sub2ind | subgraph | subplot | subsasgn | subscribe | subset | subsindex | subspace
      | subsref | substruct | subtitle | subtract | subvolume | successors | sum | summary | summer | superclasses
      | support | supports | supportsMultipleInstanceImpl | supportsParallel | surf | surf2patch | surface | surfaceArea
      | surfc | surfl | surfnorm | svd | svds | svdsketch | swapbytes | swarmchart | swarmchart3 | sylvester | symamd
      | symbfact | symmlq | symrcm | symvar | synchronize | sysobjupdate | system | table | table2array | table2cell
      | table2struct | table2timetable | tabularTextDatastore | tail | tall | tallrng | tan | tand | tanh | tar
      | tcpclient | teardown | teardownSharedTestFixture | teardownTestClass | teardownTestMethod | tempdir | tempname
      | terminate | testrunner | testsuite | tetramesh | texlabel | text | textBoundary | textread | textscan | textwrap
      | tfqmr | then | thetalim | thetatickformat | thetaticklabels | thetaticks | thingSpeakRead | thingSpeakWrite
      | throw | throwAsCaller | throwExceptionWhen | tic | tiledlayout | time | timeit | timeofday | timer | timerange
      | timerfind | timerfindall | times | timeseries | timetable | timetable2table | timezones | title | toc
      | todatenum | toeplitz | toolboxdir | topkrows | toposort | trace | transclosure | transform | transformToString
      | translate | transpose | transreduction | trapz | treelayout | treeplot | triangulation | tril | trimesh
      | triplot | trisurf | triu | ts2timetable | tscollection | tsearchn | turbo | turningdist | type | typecast
      | tzoffset | uialert | uiaxes | uibutton | uibuttongroup | uicheckbox | uiconfirm | uicontextmenu | uicontrol
      | uidatepicker | uidropdown | uieditfield | uifigure | uigauge | uigetdir | uigetfile | uigetpref | uigridlayout
      | uihtml | uihyperlink | uiimage | uiknob | uilabel | uilamp | uilistbox | uimenu | uint16 | uint32 | uint64
      | uint8 | uiopen | uipanel | uiprogressdlg | uipushtool | uiputfile | uiradiobutton | uiresume | uisave
      | uisetcolor | uisetfont | uisetpref | uislider | uispinner | uistack | uistyle | uiswitch | uitab | uitabgroup
      | uitable | uitextarea | uitogglebutton | uitoggletool | uitoolbar | uitree | uitreenode | uiwait | uminus
      | underlyingType | underlyingValue | unicode2native | union | unique | uniquetol | unix | unloadlibrary | unmesh
      | unmkpp | unregisterallevents | unregisterevent | unstack | unsubscribe | untar | unwrap | unzip | update
      | updateDependencies | updateImpl | upgradePreviouslyInstalledSupportPackages | uplus | upper | usejava | userpath
      | validate | validateattributes | validatecolor | validateFunctionSignaturesJSON | validateInputsImpl
      | validateOutputLocation | validatePropertiesImpl | validatestring | values | vander | var | varfun | vartype
      | vecnorm | ver | verifyAccessed | verifyCalled | verifyClass | verifyEmpty | verifyEqual | verifyError
      | verifyFail | verifyFalse | verifyGreaterThan | verifyGreaterThanOrEqual | verifyInstanceOf | verifyLength
      | verifyLessThan | verifyLessThanOrEqual | verifyMatches | verifyNotAccessed | verifyNotCalled | verifyNotEmpty
      | verifyNotEqual | verifyNotSameHandle | verifyNotSet | verifyNumElements | verifyReturnsTrue | verifySameHandle
      | verifySet | verifySize | verifySubstring | verifyThat | verifyTrue | verifyUsing | verifyWarning
      | verifyWarningFree | verLessThan | version | vertcat | vertexAttachments | vertexNormal | VideoReader
      | VideoWriter | view | viewmtx | visdiff | volume | volumebounds | voronoi | voronoiDiagram | voronoin | wait
      | waitbar | waitfor | waitforbuttonpress | warndlg | warning | waterfall | web | weboptions | webread | websave
      | webwrite | week | weekday | what | when | which | whitebg | whitespaceBoundary | whitespacePattern | width
      | wildcardPattern | wilkinson | winopen | winqueryreg | winter | withAnyInputs | withExactInputs | withinrange
      | withNargout | withtol | wordcloud | write | writeall | writecell | writeChecksum | writeCol | writeComment
      | writeDate | writeHistory | writeImg | writeKey | writeKeyUnit | writeline | writematrix | writestruct
      | writetable | writetimetable | writeVideo | xcorr | xcov | xlabel | xlim | xline | xlsfinfo | xlsread | xlswrite
      | xmlImportOptions | xmlread | xmlwrite | xor | xslt | xtickangle | xtickformat | xticklabels | xticks | year
      | years | ylabel | ylim | yline | ymd | ytickangle | ytickformat | yticklabels | yticks | yyaxis | yyyymmdd
      | zeros | zip | zlabel | zlim | zoom | zoomInteraction | ztickangle | ztickformat | zticklabels | zticks )

  cdflib_object_functions: |-
    (?x: close | closeVar | computeEpoch | computeEpoch16 | create | createAttr | createVar | delete | deleteAttr
      | deleteAttrEntry | deleteAttrgEntry | deleteVar | deleteVarRecords | epoch16Breakdown | epochBreakdown
      | getAttrEntry | getAttrgEntry | getAttrMaxEntry | getAttrMaxgEntry | getAttrName | getAttrNum | getAttrScope
      | getCacheSize | getChecksum | getCompression | getCompressionCacheSize | getConstantNames | getConstantValue
      | getCopyright | getFileBackward | getFormat | getLibraryCopyright | getLibraryVersion | getMajority | getName
      | getNumAttrEntries | getNumAttrgEntries | getNumAttributes | getNumgAttributes | getReadOnlyMode
      | getStageCacheSize | getValidate | getVarAllocRecords | getVarBlockingFactor | getVarCacheSize
      | getVarCompression | getVarData | getVarMaxAllocRecNum | getVarMaxWrittenRecNum | getVarName | getVarNum
      | getVarNumRecsWritten | getVarPadValue | getVarRecordData | getVarReservePercent | getVarsMaxWrittenRecNum
      | getVarSparseRecords | getVersion | hyperGetVarData | hyperPutVarData | inquire | inquireAttr | inquireAttrEntry
      | inquireAttrgEntry | inquireVar | open | putAttrEntry | putAttrgEntry | putVarData | putVarRecordData
      | renameAttr | renameVar | setCacheSize | setChecksum | setCompression | setCompressionCacheSize | setFileBackward
      | setFormat | setMajority | setReadOnlyMode | setStageCacheSize | setValidate | setVarAllocBlockRecords
      | setVarBlockingFactor | setVarCacheSize | setVarCompression | setVarInitialRecs | setVarPadValue
      | SetVarReservePercent | setVarsCacheSize | setVarSparseRecords )

  clibgen_object_functions: |-
    (?x: buildInterface | ClassDefinition | ConstructorDefinition | EnumDefinition | FunctionDefinition
      | FunctionTypeDefinition | generateLibraryDefinition | LibraryDefinition | MethodDefinition | OpaqueTypeDefinition
      | PropertyDefinition )

  H5_object_functions: |-
    (?x: close | garbage_collect | get_libversion | open | set_free_list_limits )

  H5A_object_functions: |-
    (?x: close | create | delete | get_info | get_name | get_space | get_type | iterate | open | open_by_idx
      | open_by_name | read | write )

  H5D_object_functions: |-
    (?x: close | create | get_access_plist | get_create_plist | get_offset | get_space | get_space_status
      | get_storage_size | get_type | open | read | set_extent | vlen_get_buf_size | write )

  H5DS_object_functions: |-
    (?x: attach_scale | detach_scale | get_label | get_num_scales | get_scale_name | is_scale | iterate_scales
      | set_label | set_scale )

  H5E_object_functions: |-
    (?x: clear | get_major | get_minor | walk )

  H5F_object_functions: |-
    (?x: close | create | flush | get_access_plist | get_create_plist | get_filesize | get_freespace | get_info
      | get_mdc_config | get_mdc_hit_rate | get_mdc_size | get_name | get_obj_count | get_obj_ids | is_hdf5 | mount
      | open | reopen | set_mdc_config | unmount )

  H5G_object_functions: |-
    (?x: close | create | get_info | open )

  H5I_object_functions: |-
    (?x: dec_ref | get_file_id | get_name | get_ref | get_type | inc_ref | is_valid )

  H5L_object_functions: |-
    (?x: copy | create_external | create_hard | create_soft | delete | exists | get_info | get_name_by_idx | get_val
      | iterate | iterate_by_name | move | visit | visit_by_name )

  H5ML_object_functions: |-
    (?x: compare_values | get_constant_names | get_constant_value | get_function_names | get_mem_datatype | hoffset
      | sizeof )

  H5O_object_functions: |-
    (?x: close | copy | get_comment | get_comment_by_name | get_info | link | open | open_by_idx | set_comment
      | set_comment_by_name | visit | visit_by_name )

  H5P_object_functions: |-
    (?x: all_filters_avail | close | close_class | copy | create | equal | exist | fill_value_defined | get
      | get_alignment | get_alloc_time | get_attr_creation_order | get_attr_phase_change | get_btree_ratios
      | get_char_encoding | get_chunk | get_chunk_cache | get_class | get_class_name | get_class_parent
      | get_copy_object | get_create_intermediate_group | get_driver | get_edc_check | get_external | get_external_count
      | get_family_offset | get_fapl_core | get_fapl_family | get_fapl_multi | get_fclose_degree | get_fill_time
      | get_fill_value | get_filter | get_filter_by_id | get_gc_references | get_hyper_vector_size | get_istore_k
      | get_layout | get_libver_bounds | get_link_creation_order | get_link_phase_change | get_mdc_config
      | get_meta_block_size | get_multi_type | get_nfilters | get_nprops | get_sieve_buf_size | get_size | get_sizes
      | get_small_data_block_size | get_sym_k | get_userblock | get_version | isa_class | iterate | modify_filter
      | remove_filter | set | set_alignment | set_alloc_time | set_attr_creation_order | set_attr_phase_change
      | set_btree_ratios | set_char_encoding | set_chunk | set_chunk_cache | set_copy_object
      | set_create_intermediate_group | set_deflate | set_edc_check | set_external | set_family_offset | set_fapl_core
      | set_fapl_family | set_fapl_log | set_fapl_multi | set_fapl_sec2 | set_fapl_split | set_fapl_stdio
      | set_fclose_degree | set_fill_time | set_fill_value | set_filter | set_fletcher32 | set_gc_references
      | set_hyper_vector_size | set_istore_k | set_layout | set_libver_bounds | set_link_creation_order
      | set_link_phase_change | set_mdc_config | set_meta_block_size | set_multi_type | set_nbit | set_scaleoffset
      | set_shuffle | set_sieve_buf_size | set_sizes | set_small_data_block_size | set_sym_k | set_userblock )

  H5R_object_functions: |-
    (?x: create | dereference | get_name | get_obj_type | get_region )

  H5S_object_functions: |-
    (?x: close | copy | create | create_simple | extent_copy | get_select_bounds | get_select_elem_npoints
      | get_select_elem_pointlist | get_select_hyper_blocklist | get_select_hyper_nblocks | get_select_npoints
      | get_select_type | get_simple_extent_dims | get_simple_extent_ndims | get_simple_extent_npoints
      | get_simple_extent_type | is_simple | offset_simple | select_all | select_elements | select_hyperslab
      | select_none | select_valid | set_extent_none | set_extent_simple )

  H5T_object_functions: |-
    (?x: array_create | close | commit | committed | copy | create | detect_class | enum_create | enum_insert
      | enum_nameof | enum_valueof | equal | get_array_dims | get_array_ndims | get_class | get_create_plist | get_cset
      | get_ebias | get_fields | get_inpad | get_member_class | get_member_index | get_member_name | get_member_offset
      | get_member_type | get_member_value | get_native_type | get_nmembers | get_norm | get_offset | get_order
      | get_pad | get_precision | get_sign | get_size | get_strpad | get_super | get_tag | insert | is_variable_str
      | lock | open | pack | set_cset | set_ebias | set_fields | set_inpad | set_norm | set_offset | set_order | set_pad
      | set_precision | set_sign | set_size | set_strpad | set_tag | vlen_create )

  H5Z_object_functions: |-
    (?x: filter_avail | get_filter_info )

  NET_object_functions: |-
    (?x: addAssembly | Assembly | createArray | createGeneric | disableAutoRelease | enableAutoRelease | GenericClass
      | invokeGenericMethod | isNETSupported | NetException | setStaticProperty )

  netcdf_object_functions: |-
    (?x: abort | close | copyAtt | create | defDim | defGrp | defVar | defVarChunking | defVarDeflate | defVarFill
      | defVarFletcher32 | delAtt | endDef | getAtt | getChunkCache | getConstant | getConstantNames | getVar | inq
      | inqAtt | inqAttID | inqAttName | inqDim | inqDimID | inqDimIDs | inqFormat | inqGrpName | inqGrpNameFull
      | inqGrpParent | inqGrps | inqLibVers | inqNcid | inqUnlimDims | inqVar | inqVarChunking | inqVarDeflate
      | inqVarFill | inqVarFletcher32 | inqVarID | inqVarIDs | open | putAtt | putVar | reDef | renameAtt | renameDim
      | renameVar | setChunkCache | setDefaultFormat | setFill | sync )

  RandStream_object_functions: |-
    (?x: create | getGlobalStream | list | setGlobalStream )

  Tiff_object_functions: |-
    (?x: close | computeStrip | computeTile | currentDirectory | getTag | getTagNames | getVersion | isTiled
      | lastDirectory | nextDirectory | numberOfStrips | numberOfTiles | read | readEncodedStrip | readEncodedTile
      | readRGBAImage | readRGBAStrip | readRGBATile | rewriteDirectory | setDirectory | setSubDirectory | setTag
      | write | writeDirectory | writeEncodedStrip | writeEncodedTile )

################################################################################

contexts:

  main:
    - include: function-declarations
    - include: class-declarations
    - include: keywords
    - include: expressions

  expressions:
    - include: comments
    - include: line-continuations
    - include: parens
    - include: brackets
    - include: braces
    - include: numbers
    - include: strings
    - include: operators
    - include: accessor-dots
    - include: terminators
    - include: separator-commas
    - include: builtin-packages
    - include: structures
    - include: builtin-constants
    - include: builtin-variables
    - include: transposed-variables
    - include: variable-assignments
    - include: builtin-types
    - include: builtin-commands
    - include: builtin-functions
    - include: variables
    - include: invalid-variables

  expect-expression:
    - match: (?=\s*[;,])
      pop: 1
    - include: eol-pop
    - include: expressions

  eol-pop:
    - match: '{{eol}}'
      pop: 1

  else-pop:
    - match: (?=\S)
      pop: 1

  immediately-pop:
    - match: ''
      pop: 1

###[ COMMENTS AND LINE CONTINUATION ]###########################################

  comments:
    - include: block-comments
    - include: line-comments

  block-comments:
    - match: ^\s*(%\{)\s*\n
      captures:
        1: punctuation.definition.comment.matlab
      push: block-comment-content

  block-comment-content:
    - meta_scope: comment.block.percentage.matlab
    - match: ^\s*(%\})\s*$\n?
      captures:
        1: punctuation.definition.comment.matlab
      pop: 1
    - include: block-comments

  line-comments:
    - match: ^\s*(%%(?!%))\s*(.*\S)?\s*\n?
      scope: comment.line.double-percentage.matlab
      captures:
        1: punctuation.definition.comment.matlab
        2: entity.name.section.matlab
    - match: (%+).*\n?
      scope: comment.line.percentage.matlab
      captures:
        1: punctuation.definition.comment.matlab

  line-continuations:
    - match: (\.{3})\s*(\S.*\n?)?
      captures:
        1: punctuation.separator.continuation.line.matlab
        2: comment.line.matlab

###[ LANGUAGE FUNDAMENTALS ]####################################################

  numbers:
    - match: \b(0[xX])(\h+)(u8|u16|u32|u64|s8|s16|s32|s64)?\b
      scope: meta.number.integer.hexadecimal.matlab
      captures:
        1: constant.numeric.base.matlab
        2: constant.numeric.value.matlab
        3: constant.numeric.suffix.matlab
      push: maybe-transpose
    - match: \b(0[bB])([01]+)(u8|u16|u32|u64|s8|s16|s32|s64)?\b
      scope: meta.number.integer.binary.matlab
      captures:
        1: constant.numeric.base.matlab
        2: constant.numeric.value.matlab
        3: constant.numeric.suffix.matlab
      push: maybe-transpose
    - match: ((?:\d+(\.)\d*|(\.)?\d+)(?:[Ee][-+]?\d+)?)(i|j)\b
      scope: meta.number.imaginary.decimal.matlab
      captures:
        1: constant.numeric.value.matlab
        2: punctuation.separator.decimal.matlab
        3: punctuation.separator.decimal.matlab
        4: constant.numeric.suffix.matlab
      push: maybe-transpose
    - match: (?:\d+(\.)\d*|(\.)?\d+)(?:[Ee][-+]?\d+)?(?!\w)
      scope: meta.number.float.decimal.matlab constant.numeric.value.matlab
      captures:
        1: punctuation.separator.decimal.matlab
        2: punctuation.separator.decimal.matlab
      push: maybe-transpose

  strings:
    - match: \'
      scope: punctuation.definition.string.begin.matlab
      push: single-quoted-string
    - match: \"
      scope: punctuation.definition.string.begin.matlab
      push: double-quoted-string

  single-quoted-string:
    - meta_include_prototype: false
    - meta_scope: meta.string.matlab string.quoted.single.matlab
    - match: \'\'
      scope: constant.character.escape.matlab
    - match: \'
      scope: punctuation.definition.string.end.matlab
      set: maybe-dot-transpose
    - match: $\n?
      scope: invalid.illegal.unclosed-string.matlab
      pop: 1
    - include: escaped-characters
    - include: format-specs

  double-quoted-string:
    - meta_include_prototype: false
    - meta_scope: meta.string.matlab string.quoted.double.matlab
    - match: \"\"
      scope: constant.character.escape.matlab
    - match: \"
      scope: punctuation.definition.string.end.matlab
      set: maybe-transpose
    - match: $\n?
      scope: invalid.illegal.unclosed-string.matlab
      pop: 1
    - include: escaped-characters
    - include: format-specs

  escaped-characters:
    - match: \%\%|\\\\|\\[abfnrtv]
      scope: constant.character.escape.matlab

  format-specs:
    - match: \%(?:\d\$)?[-+\s0#]?(?:\d+|\*)?(?:\.\d+|\.\*)?(?:[cdeEfgGis]|[bt]?[ouxX])
      scope: constant.other.placeholder.matlab

  variables:
    - match: \b{{identifier}}
      scope: variable.other.matlab

  transposed-variables:
    - match: \b({{identifier}})(?:\s*(\.\')|(\'))
      captures:
        1: variable.other.matlab
        2: keyword.operator.transpose.matlab
        3: keyword.operator.transpose.matlab

  variable-assignments:
    - match: \b({{identifier}})\s*(=)(?!=)
      captures:
        1: variable.other.matlab
        2: keyword.operator.assignment.matlab

  structures:
    - match: \b({{identifier}})(\.)(?={{identifier}})
      captures:
        1: variable.other.matlab
        2: punctuation.accessor.dot.matlab
      push: structure-fields

  structure-fields:
    - match: ({{identifier}})(\.)(?={{identifier}})
      captures:
        1: variable.other.member.matlab
        2: punctuation.accessor.dot.matlab
    - match: '{{identifier}}'
      scope: variable.other.member.matlab
      set: maybe-transpose

###[ PARENS/BRACKETS/BRACES BLOCKS ]############################################

  parens:
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: parens-content

  parens-content:
    - meta_scope: meta.parens.matlab
    - match: \)
      scope: punctuation.section.parens.end.matlab
      set: maybe-fields-or-transpose
    - include: last-indices
    - include: expressions

  maybe-fields-or-transpose:
    - match: (\.)({{identifier}})
      captures:
        1: punctuation.accessor.dot.matlab
        2: variable.other.member.matlab
    - match: \.(?!['*/\\^])
      scope: punctuation.accessor.dot.matlab
      pop: 1
    - include: maybe-transpose

  brackets:
    - match: \[
      scope: punctuation.section.brackets.begin.matlab
      push: brackets-content

  brackets-content:
    - meta_scope: meta.brackets.matlab
    - match: \]
      scope: punctuation.section.brackets.end.matlab
      set: maybe-transpose
    - include: separator-semicolons
    - include: argument-placeholders
    - include: expressions

  braces:
    - match: \{
      scope: punctuation.section.braces.begin.matlab
      push: braces-content

  braces-content:
    - meta_scope: meta.braces.matlab
    - match: \}
      scope: punctuation.section.braces.end.matlab
      set: maybe-fields-or-transpose
    - include: separator-semicolons
    - include: last-indices
    - include: expressions

###[ DECLARATION BLOCKS ]#######################################################

  function-declarations:
    - match: \bfunction\b
      scope: keyword.declaration.function.matlab
      push: function-declaration-header

  function-declaration-header:
    - meta_scope: meta.function.matlab
    - include: line-continuations
    - match: '{{eol}}'
      set: maybe-function-arguments-block
    - match: ({{identifier}})\s*(=)
      captures:
        1: variable.parameter.output.matlab
        2: keyword.operator.assignment.matlab
    - match: \[
      scope: punctuation.section.brackets.begin.matlab
      push: function-output-parameters-list
    - match: =
      scope: keyword.operator.assignment.matlab
    - match: (?:(?:set|get)(\.))?{{identifier}}
      scope: entity.name.function.matlab
      captures:
        1: punctuation.accessor.dot.matlab
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: function-input-parameters-list

  function-output-parameters-list:
    - include: line-continuations
    - include: eol-pop
    - include: separator-commas
    - match: \]
      scope: punctuation.section.brackets.end.matlab
      pop: 1
    - match: '{{identifier}}'
      scope: variable.parameter.output.matlab

  function-input-parameters-list:
    - clear_scopes: 1
    - meta_scope: meta.function.parameters.matlab
    - include: line-continuations
    - include: eol-pop
    - include: separator-commas
    - include: argument-placeholders
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    - match: '{{identifier}}'
      scope: variable.parameter.input.matlab

  maybe-function-arguments-block:
    - meta_content_scope: meta.function.matlab
    - include: comments
    - match: \barguments\b
      scope: keyword.context.arguments.matlab
      push: function-arguments-block-header
    - match: (?=\S)
      set: function-body

  function-arguments-block-header:
    - meta_scope: meta.arguments.matlab
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: function-arguments-block-attributes-list
    - match: '{{eol}}'
      set: function-arguments-block-content

  function-arguments-block-attributes-list:
    - meta_scope: meta.attributes.matlab
    - include: eol-pop
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    - match: \bRepeating\b
      scope: variable.parameter.attribute.matlab

  function-arguments-block-content:
    - meta_scope: meta.arguments.matlab
    - match: \bend\b
      scope: keyword.context.arguments.end.matlab
      pop: 1
    - match: \b\.\?
      scope: keyword.operator.properties.matlab
    - include: argument-placeholders
    - include: builtin-types
    - include: expressions

  function-body:
    - meta_scope: meta.function.matlab
    - match: \bend\b
      scope: keyword.declaration.function.end.matlab
      pop: 1
    # Heuristic to pop context when another `function` keyword appears directly at the start of a line, which is
    # unlikely to indicate a nested function (the `end` keyword is sometimes optional).
    - match: ^(?=function\b)
      pop: 1
    - include: function-declarations
    - include: keywords
    - include: expressions

  class-declarations:
    - match: \bclassdef\b
      scope: keyword.declaration.class.matlab
      push: class-declaration-header

  class-declaration-header:
    - meta_scope: meta.class.matlab
    - include: eol-pop
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: class-attributes-list
    - match: '{{identifier}}'
      scope: entity.name.class.matlab
      set: maybe-superclasses-list

  maybe-superclasses-list:
    - meta_content_scope: meta.class.matlab
    - include: line-continuations
    - match: '{{eol}}'
      set: class-body
    - match: <
      scope: punctuation.separator.inheritance.matlab
      set: superclasses-list

  superclasses-list:
    - meta_scope: meta.class.matlab
    - include: line-continuations
    - match: '{{eol}}'
      set: class-body
    - match: (?={{identifier}}\.)
      push: qualified-superclass
    - match: '{{identifier}}'
      scope: entity.other.inherited-class.matlab
    - match: \&
      scope: punctuation.separator.sequence.matlab

  qualified-superclass:
    - meta_scope: meta.path.matlab
    - match: '({{identifier}})(\.)'
      captures:
        1: variable.namespace.matlab
        2: punctuation.accessor.dot.matlab
    - match: '{{identifier}}'
      scope: entity.other.inherited-class.matlab
      pop: 1
    - include: immediately-pop

  class-attributes-list:
    - meta_scope: meta.attributes.matlab
    - include: line-continuations
    - include: eol-pop
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    # https://www.mathworks.com/help/matlab/matlab_oop/class-attributes.html
    - match: \b(?:Abstract|AllowedSubclasses|ConstructOnLoad|HandleCompatible|Hidden|InferiorClasses|Sealed)\b
      scope: variable.parameter.attribute.matlab
    - include: expressions

  class-body:
    - meta_scope: meta.class.matlab
    - match: \bend\b
      scope: keyword.declaration.class.end.matlab
      pop: 1
    - include: comments
    - include: class-properties-blocks
    - include: class-methods-blocks
    - include: class-events-blocks
    - include: class-enumeration-blocks

  class-properties-blocks:
    - match: \bproperties\b
      scope: keyword.declaration.properties.matlab
      push: class-properties-block-header

  class-properties-block-header:
    - meta_scope: meta.properties.matlab
    - match: '{{eol}}'
      set: class-properties-block-body
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: class-properties-block-attributes-list

  class-properties-block-attributes-list:
    - meta_scope: meta.attributes.matlab
    - include: line-continuations
    - include: eol-pop
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    # https://www.mathworks.com/help/matlab/matlab_oop/property-attributes.html
    - match: \b(?:AbortSet|Abstract|Access|Constant|Dependent|GetAccess|GetObservable|Hidden|NonCopyable|PartialMatchPriority|SetAccess|SetObservable|Transient)\b
      scope: variable.parameter.attribute.matlab
    - match: \b(?:public|protected|private)\b
      scope: storage.modifier.matlab
    - include: expressions

  class-properties-block-body:
    - meta_scope: meta.properties.matlab
    - match: \bend\b
      scope: keyword.declaration.properties.end.matlab
      pop: 1
    - include: builtin-types
    - include: expressions

  class-methods-blocks:
    - match: \bmethods\b
      scope: keyword.context.methods.matlab
      push: class-methods-block-header

  class-methods-block-header:
    - meta_scope: meta.methods.matlab
    - match: '{{eol}}'
      set: class-methods-block-body
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: class-methods-block-attributes-list

  class-methods-block-attributes-list:
    - meta_scope: meta.attributes.matlab
    - include: line-continuations
    - include: eol-pop
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    # https://www.mathworks.com/help/matlab/matlab_oop/method-attributes.html
    - match: \b(?:Abstract|Access|Hidden|Sealed|Static)\b
      scope: variable.parameter.attribute.matlab
    - match: \b(?:public|protected|private)\b
      scope: storage.modifier.matlab
    - include: expressions

  class-methods-block-body:
    - meta_scope: meta.methods.matlab
    - match: \bend\b
      scope: keyword.context.methods.end.matlab
      pop: 1
    - include: comments
    - include: function-declarations

  class-events-blocks:
    - match: \bevents\b
      scope: keyword.declaration.events.matlab
      push: class-events-block-header

  class-events-block-header:
    - meta_scope: meta.events.matlab
    - match: '{{eol}}'
      set: class-events-block-body
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      push: class-events-block-attributes-list

  class-events-block-attributes-list:
    - meta_scope: meta.attributes.matlab
    - include: line-continuations
    - include: eol-pop
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1
    # https://www.mathworks.com/help/matlab/matlab_oop/event-attributes.html
    - match: \b(?:Hidden|ListenAccess|NotifyAccess)\b
      scope: variable.parameter.attribute.matlab
    - match: \b(?:public|protected|private)\b
      scope: storage.modifier.matlab
    - include: expressions

  class-events-block-body:
    - meta_scope: meta.events.matlab
    - match: \bend\b
      scope: keyword.declaration.events.end.matlab
      pop: 1
    - include: comments
    - include: variables

  class-enumeration-blocks:
    - match: \benumeration\b
      scope: keyword.declaration.enumeration.matlab
      push: class-enumeration-block-body

  class-enumeration-block-body:
    - meta_scope: meta.enumeration.matlab
    - match: \bend\b
      scope: keyword.declaration.enumeration.end.matlab
      pop: 1
    - include: expressions

###[ KEYWORDS AND FLOW CONTROL BLOCKS ]#########################################

  # https://www.mathworks.com/help/matlab/ref/iskeyword.html
  # https://www.mathworks.com/help/matlab/control-flow.html
  keywords:
    - include: if-blocks
    - include: switch-blocks
    - include: for-blocks
    - include: parfor-blocks
    - include: while-blocks
    - include: try-blocks
    - include: spmd-blocks
    - match: \bbreak\b
      scope: keyword.control.flow.break.matlab
    - match: \bcontinue\b
      scope: keyword.control.flow.continue.matlab
    - match: \breturn\b
      scope: keyword.control.flow.return.matlab
    - match: \bglobal\b
      scope: storage.modifier.global.matlab
    - match: \bpersistent\b
      scope: storage.modifier.persistent.matlab

  if-blocks:
    - match: \bif\b
      scope: keyword.control.conditional.if.matlab
      push: if-block-content

  if-block-content:
    - meta_scope: meta.block.if.matlab
    - match: \belseif\b
      scope: keyword.control.conditional.elseif.matlab
    - match: \belse\b
      scope: keyword.control.conditional.else.matlab
    - match: \bend\b
      scope: keyword.control.conditional.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  switch-blocks:
    - match: \bswitch\b
      scope: keyword.control.conditional.switch.matlab
      push:
        - switch-block-content
        - expect-first-case-statement
        - expect-expression

  expect-first-case-statement:
    # Disable dedentation of first case statement by special indentation rule.
    - match: ^\s*(case)\b
      captures:
        1: keyword.control.conditional.case.matlab
      set:
        - meta-disable-dedentation
        - expect-expression
    - include: comments
    - include: else-pop

  meta-disable-dedentation:
    - meta_include_prototype: false
    - meta_scope: meta.disable-dedentation.matlab
    - include: immediately-pop

  switch-block-content:
    - meta_scope: meta.block.switch.matlab
    - match: \bcase\b
      scope: keyword.control.conditional.case.matlab
    - match: \botherwise\b
      scope: keyword.control.conditional.otherwise.matlab
    - match: \bend\b
      scope: keyword.control.conditional.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  for-blocks:
    - match: \bfor\b
      scope: keyword.control.loop.for.matlab
      push: for-block-content

  for-block-content:
    - meta_scope: meta.block.for.matlab
    - match: \bend\b
      scope: keyword.control.loop.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  parfor-blocks:
    - match: \bparfor\b
      scope: keyword.control.loop.parfor.matlab
      push: parfor-block-content

  parfor-block-content:
    - meta_scope: meta.block.parfor.matlab
    - match: \bend\b
      scope: keyword.control.loop.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  while-blocks:
    - match: \bwhile\b
      scope: keyword.control.loop.while.matlab
      push: while-block-content

  while-block-content:
    - meta_scope: meta.block.while.matlab
    - match: \bend\b
      scope: keyword.control.loop.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  try-blocks:
    - match: \btry\b
      scope: keyword.control.exception.try.matlab
      push: try-block-content

  try-block-content:
    - meta_scope: meta.block.try.matlab
    - match: \bcatch\b
      scope: keyword.control.exception.catch.matlab
    - match: \bend\b
      scope: keyword.control.exception.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

  spmd-blocks:
    - match: \bspmd\b
      scope: keyword.context.spmd.matlab
      push: spmd-block-content

  spmd-block-content:
    - meta_scope: meta.block.spmd.matlab
    - match: \bend\b
      scope: keyword.context.spmd.end.matlab
      pop: 1
    - include: keywords
    - include: expressions

###[ OPERATORS AND PUNCTUATION ]################################################

  # https://www.mathworks.com/help/matlab/matlab_prog/matlab-operators-and-special-characters.html
  operators:
    - match: '\+|-|\*|\.\*|/|\./|\\|\.\\|\^|\.\^'
      scope: keyword.operator.arithmetic.matlab
    - match: '==|~=|>=|>|<=|<'
      scope: keyword.operator.comparison.matlab
    - match: '~|&&|&|\|\||\|'
      scope: keyword.operator.logical.matlab
    - match: ':'
      scope: keyword.operator.colon.matlab
    - match: '='
      scope: keyword.operator.assignment.matlab
    - match: \?(?=[A-Za-z])
      scope: keyword.operator.metaclass.matlab
    - match: \!
      scope: keyword.operator.shell-escape.matlab
      push: shell-escape-content
    - match: \b\@
      scope: punctuation.accessor.at.matlab
    - match: \@
      scope: keyword.operator.at.matlab
      push: function-handle

  shell-escape-content:
    - meta_content_scope: meta.string.matlab string.unquoted.matlab
    - match: \n
      pop: 1

  function-handle:
    - match: \(
      scope: punctuation.section.parens.begin.matlab
      set: anonymous-function-parameters-list
    - match: ''
      pop: 1

  anonymous-function-parameters-list:
    - meta_scope: meta.function.parameters.matlab
    - include: line-continuations
    - include: eol-pop
    - match: '{{identifier}}'
      scope: variable.parameter.input.matlab
    - include: separator-commas
    - match: \)
      scope: punctuation.section.parens.end.matlab
      pop: 1

  maybe-transpose:
    - match: (?:\s*(\.\')|(\'))?
      captures:
        1: keyword.operator.transpose.matlab
        2: keyword.operator.transpose.matlab
      pop: 1

  maybe-dot-transpose:
    - match: (?:\s*(\.\'))?
      captures:
        1: keyword.operator.transpose.matlab
      pop: 1

  accessor-dots:
    - match: \b\.
      scope: punctuation.accessor.dot.matlab

  terminators:
    - match: \;
      scope: punctuation.terminator.matlab

  separator-commas:
    - match: \,
      scope: punctuation.separator.sequence.matlab

  separator-semicolons:
    - match: \;
      scope: punctuation.separator.sequence.matlab

###[ BUILTIN CONSTANTS, VARIABLES AND DATA TYPES ]##############################

  # Functions that return essential constants, usually used without parameters
  builtin-constants:
    - match: \b(true|false|eps|pi|Inf|NaN|NaT|flintmax|intmax|intmin|realmax|realmin|namelengthmax)\b
      scope: constant.language.matlab
      push: maybe-transpose

  builtin-variables:
    - match: \b(ans|nargin|nargout|varargin|varargout)\b
      scope: variable.language.matlab
      push: maybe-transpose

  builtin-types:
    - match: \b(?:categorical|cell|char|complex|double|int8|int16|int32|int64|logical|single|string|struct|table|timeseries|timetable|uint8|uint16|uint32|uint64)\b(?!\()
      scope: storage.type.matlab

  last-indices:
    - match: \bend\b
      scope: variable.language.matlab
      push: maybe-transpose

  argument-placeholders:
    - match: \~(?![A-Za-z])
      scope: variable.language.anonymous.matlab

###[ BUILTIN COMMANDS AND FUNCTIONS ]###########################################

  # Functions with predefined parameters, mostly used in command syntax form
  builtin-commands:
    # https://www.mathworks.com/help/matlab/ref/axis.html
    - match: \baxis\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-axis-parameter
    # https://www.mathworks.com/help/matlab/ref/beep.html
    - match: \bbeep\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/box.html
    - match: \bbox\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/matlab.graphics.interaction.internal.brush.html
    - match: \bbrush\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/cla.html
    - match: \bcla\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-cla-parameter
    # https://www.mathworks.com/help/matlab/ref/clear.html
    - match: \bclear\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-clear-parameter
    # https://www.mathworks.com/help/matlab/ref/close.html
    - match: \bclose\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-close-parameter
    # https://www.mathworks.com/help/matlab/ref/diary.html
    - match: \bdiary\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/drawnow.html
    - match: \bdrawnow\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-drawnow-parameter
    # https://www.mathworks.com/help/matlab/ref/echo.html
    - match: \becho\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-echo-parameter
    # https://www.mathworks.com/help/matlab/ref/exist.html
    - match: \bexist\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-exist-parameter
    # https://www.mathworks.com/help/matlab/ref/exit.html
    # https://www.mathworks.com/help/matlab/ref/quit.html
    - match: \b(?:exit|quit)\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-exit-parameter
    # https://www.mathworks.com/help/matlab/ref/format.html
    - match: \bformat\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-format-parameter
    # https://www.mathworks.com/help/matlab/ref/grid.html
    - match: \bgrid\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-grid-parameter
    # https://www.mathworks.com/help/matlab/ref/hidden.html
    - match: \bhidden\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/hold.html
    - match: \bhold\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-hold-parameter
    # https://www.mathworks.com/help/matlab/ref/import.html
    - match: \bimport\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-import-parameter
    # https://www.mathworks.com/help/matlab/ref/material.html
    - match: \bmaterial\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-material-parameter
    # https://www.mathworks.com/help/matlab/ref/mkdir.html
    - match: \bmkdir\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-mkdir-parameter
    # https://www.mathworks.com/help/matlab/ref/more.html
    - match: \bmore\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-on-off-parameter
    # https://www.mathworks.com/help/matlab/ref/movefile.html
    - match: \bmovefile\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-movefile-parameter
    # https://www.mathworks.com/help/matlab/ref/opengl.html
    - match: \bopengl\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-opengl-parameter
    # https://www.mathworks.com/help/matlab/ref/rmdir.html
    - match: \brmdir\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-rmdir-parameter
    # https://www.mathworks.com/help/matlab/ref/who.html
    # https://www.mathworks.com/help/matlab/ref/whos.html
    - match: \b(?:who|whos)\b
      scope: meta.function-call.matlab support.function.builtin.matlab
      push: maybe-who-parameter

  maybe-on-off-parameter:
    - match: (?:on|off)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-axis-parameter:
    - match: (?:manual|auto|tight|padded|equal|image|square|fill|vis3d|normal|xy|ij|on|off)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-cla-parameter:
    - match: reset\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-clear-parameter:
    - match: -regexp\b
      scope: meta.string.matlab support.constant.matlab
      set: regexp-pattern-list
    - match: (?:all|classes|functions|global|import|java|mex|variables)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  regexp-pattern-list:
    - include: eol-pop
    - match: (?=[;,])
      pop: 1
    - match: '[^;,\s]+'
      scope: meta.string.matlab string.regexp.matlab

  maybe-close-parameter:
    - match: all\b
      scope: meta.string.matlab support.constant.matlab
      set: maybe-close-parameter-2
    - include: else-pop
    - include: eol-pop

  maybe-close-parameter-2:
    - match: (?:hidden|force)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-drawnow-parameter:
    - match: (?:limitrate|nocallbacks|update|expose)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-echo-parameter:
    - match: (?:on|off)\b
      scope: meta.string.matlab support.constant.matlab
      set: maybe-echo-parameter-2
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-on-off-parameter
    - include: else-pop
    - include: eol-pop

  maybe-echo-parameter-2:
    - match: all\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-exist-parameter:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-exist-parameter-2
    - include: else-pop
    - include: eol-pop

  maybe-exist-parameter-2:
    - match: (?:builtin|class|dir|file|var)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-exit-parameter:
    - match: (?:cancel|force)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-format-parameter:
    - match: (?:short|long|shortE|longE|shortG|longG|shortEng|longEng|bank|hex|rational|compact|loose)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-grid-parameter:
    - match: (?:on|off|minor)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-hold-parameter:
    - match: (?:on|off|all)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-import-parameter:
    - match: (?:\w+\.)*(?:\w+|\*)
      scope: meta.string.matlab string.unquoted.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-material-parameter:
    - match: (?:shiny|dull|metal|default)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-mkdir-parameter:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-mkdir-parameter-2
    - include: else-pop
    - include: eol-pop

  maybe-mkdir-parameter-2:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-movefile-parameter:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-movefile-parameter-2
    - include: else-pop
    - include: eol-pop

  maybe-movefile-parameter-2:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-movefile-parameter-3
    - include: else-pop
    - include: eol-pop

  maybe-movefile-parameter-3:
    - match: f\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-opengl-parameter:
    - match: (?:info|software|hardware|hardwarebasic)\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-rmdir-parameter:
    - match: '{{filename}}'
      scope: meta.string.matlab string.unquoted.matlab
      set: maybe-rmdir-parameter-2
    - include: else-pop
    - include: eol-pop

  maybe-rmdir-parameter-2:
    - match: s\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  maybe-who-parameter:
    - match: global\b
      scope: meta.string.matlab support.constant.matlab
      pop: 1
    - include: else-pop
    - include: eol-pop

  # Parentheses are usually omitted when functions are used without parameters.
  # This command syntax is also possible for functions if all parameters are character arrays.
  # Only the function names are matched here to allow both command syntax and function syntax form.
  # https://www.mathworks.com/help/matlab/matlab_prog/command-vs-function-syntax.html
  builtin-functions:
    - match: \b{{matlab_functions}}\b
      scope: meta.function-call.matlab support.function.builtin.matlab

###[ BUILTIN PACKAGES AND OBJECT FUNCTIONS ]####################################

  builtin-packages:
    - match: \bcdflib\b
      scope: support.module.builtin.matlab
      push:
        - maybe-cdflib-object-function
        - maybe-accessor-dot
    - match: \bclibgen\b
      scope: support.module.builtin.matlab
      push:
        - maybe-clibgen-object-function
        - maybe-accessor-dot
    - match: \bH5\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5-object-function
        - maybe-accessor-dot
    - match: \bH5A\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5a-object-function
        - maybe-accessor-dot
    - match: \bH5DS\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5ds-object-function
        - maybe-accessor-dot
    - match: \bH5E\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5e-object-function
        - maybe-accessor-dot
    - match: \bH5F\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5f-object-function
        - maybe-accessor-dot
    - match: \bH5G\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5g-object-function
        - maybe-accessor-dot
    - match: \bH5I\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5i-object-function
        - maybe-accessor-dot
    - match: \bH5L\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5l-object-function
        - maybe-accessor-dot
    - match: \bH5ML\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5ml-object-function
        - maybe-accessor-dot
    - match: \bH5O\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5o-object-function
        - maybe-accessor-dot
    - match: \bH5P\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5p-object-function
        - maybe-accessor-dot
    - match: \bH5R\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5r-object-function
        - maybe-accessor-dot
    - match: \bH5S\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5s-object-function
        - maybe-accessor-dot
    - match: \bH5T\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5t-object-function
        - maybe-accessor-dot
    - match: \bH5Z\b
      scope: support.module.builtin.matlab
      push:
        - maybe-h5z-object-function
        - maybe-accessor-dot
    - match: \bMException\b
      scope: support.module.builtin.matlab
      push:
        - maybe-mexception-object-function
        - maybe-accessor-dot
    - match: \bNET\b
      scope: support.module.builtin.matlab
      push:
        - maybe-net-object-function
        - maybe-accessor-dot
    - match: \bnetcdf\b
      scope: support.module.builtin.matlab
      push:
        - maybe-netcdf-object-function
        - maybe-accessor-dot
    - match: \bRandStream\b
      scope: support.module.builtin.matlab
      push:
        - maybe-randstream-object-function
        - maybe-accessor-dot
    - match: \bTiff\b
      scope: support.module.builtin.matlab
      push:
        - maybe-tiff-object-function
        - maybe-accessor-dot

  maybe-accessor-dot:
    - match: \.\'
      scope: keyword.operator.transpose.matlab
      pop: 2
    - match: \.(?!\*|/|\\|\^)
      scope: punctuation.accessor.dot.matlab
      pop: 1
    - match: ''
      pop: 2

  maybe-cdflib-object-function:
    - match: '{{cdflib_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-clibgen-object-function:
    - match: '{{clibgen_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5-object-function:
    - match: '{{H5_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5a-object-function:
    - match: '{{H5A_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5ds-object-function:
    - match: '{{H5DS_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5e-object-function:
    - match: '{{H5E_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5f-object-function:
    - match: '{{H5F_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5g-object-function:
    - match: '{{H5G_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5i-object-function:
    - match: '{{H5I_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5l-object-function:
    - match: '{{H5L_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5ml-object-function:
    - match: '{{H5ML_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5o-object-function:
    - match: '{{H5O_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5p-object-function:
    - match: '{{H5P_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5r-object-function:
    - match: '{{H5R_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5s-object-function:
    - match: '{{H5S_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5t-object-function:
    - match: '{{H5T_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-h5z-object-function:
    - match: '{{H5Z_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-mexception-object-function:
    - match: last\b
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-net-object-function:
    - match: '{{NET_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-netcdf-object-function:
    - match: '{{netcdf_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-randstream-object-function:
    - match: '{{RandStream_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

  maybe-tiff-object-function:
    - match: '{{Tiff_object_functions}}\b'
      scope: meta.function-call.matlab support.function.matlab
      pop: 1
    - match: '{{identifier}}?'
      scope: variable.other.matlab
      pop: 1

###[ INVALID ]##################################################################

  invalid-variables:
    # No variables or function names can start with a number or an underscore.
    - match: '\b(_\w|\d+[_a-df-zA-DF-Z])\w*\b'
      scope: invalid.illegal.invalid-variable-name.matlab
